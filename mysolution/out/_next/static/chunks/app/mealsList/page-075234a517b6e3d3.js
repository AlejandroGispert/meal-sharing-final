(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{2455:function(e,t,a){Promise.resolve().then(a.bind(a,8087))},8518:function(e){e.exports={header:"page_header__oRW75",navbar:"page_navbar__k3RMs",margin:"page_margin__dW79Q",grid:"page_grid__JZ9Cz",gridCard:"page_gridCard__SHr0g",courseButton:"page_courseButton__PCWLZ",courseButtonContainer:"page_courseButtonContainer__eS198",aboutParagraphs:"page_aboutParagraphs__oBds0",aboutHeader:"page_aboutHeader__qF7Si","contact-info":"page_contact-info__a4Z7l",container:"page_container__jZF7q",backgroundVideo:"page_backgroundVideo__EjNBN",videoWrapper:"page_videoWrapper__nmU9S",fadeOut:"page_fadeOut__fTsyT",content:"page_content___38fW",transcript:"page_transcript__4aCQE",cvText:"page_cvText__1AvYq",aboutContainer:"page_aboutContainer__DgMjX",becomeHostSection:"page_becomeHostSection__Dqkx_",mediaBox:"page_mediaBox__VTlbq",mediaVideos:"page_mediaVideos__gySBt",imagesContainers:"page_imagesContainers__dIZiD",word:"page_word__YasOU",active:"page_active__9fwfh",homeTextFrontContainer:"page_homeTextFrontContainer__EHP1_",title:"page_title__po7na",map:"page_map__8FF97",becomeHostFormContainer:"page_becomeHostFormContainer__rpALs",stylingPics:"page_stylingPics__P1Wki",aboutAddWhenResponsive:"page_aboutAddWhenResponsive__0U9Hy"}},998:function(e,t,a){"use strict";a.d(t,{H:function(){return l},a:function(){return s}});var n=a(7437),r=a(2265);let i=(0,r.createContext)(),s=()=>(0,r.useContext)(i),l=e=>{let{children:t}=e,[a,s]=(0,r.useState)(null);return(0,n.jsx)(i.Provider,{value:{user:a,login:e=>{s(e)},logout:()=>{s(null)}},children:t})}},8087:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var n=a(7437),r=a(2265),i=a(6548),s=a(3719),l=a(1193),o=a(7349),c=a(9021),d=a(8518),u=a(8620),h=a(6648),g=a(998);function m(e){let{reviews:t}=e,{user:a}=(0,g.a)();return(0,n.jsxs)(l.default,{sx:{position:"absolute",top:"10%",right:"5%",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:3,overflowY:"scroll",maxHeight:"80%",zIndex:5},children:[(0,n.jsx)(s.default,{variant:"h6",children:"Reviews"}),t&&t.length>0?t.map((e,t)=>(0,n.jsxs)(l.default,{sx:{mt:2},children:[(0,n.jsx)(s.default,{variant:"body1",children:e.title}),(0,n.jsxs)(s.default,{variant:"body2",children:["* ",e.description]}),(0,n.jsxs)(s.default,{variant:"body2",children:["* ",e.stars]})]},t)):(0,n.jsx)(s.default,{children:"No Reviews Available"})]})}a(7449);var x=a(8801),p=a(335),_=a(9388),f=a(8685),j=e=>{let{onRatingChange:t}=e,[a,i]=(0,r.useState)(0),s=e=>{i(e),t(e)};return(0,n.jsx)(l.default,{sx:{display:"flex",alignItems:"center"},children:[1,2,3,4,5].map(e=>(0,n.jsx)(p.default,{onClick:()=>s(e),children:e<=a?(0,n.jsx)(_.Z,{sx:{color:"yellow"}}):(0,n.jsx)(f.Z,{sx:{color:"gray"}})},e))})};let v={image:"images/thumbnail.png",tag1:"Title",tag2:"Description",tag3:"Stars",buttonTxt:"Submit"};function b(e){let{mealId:t}=e,[a,o]=(0,r.useState)(!0),[d,u]=(0,r.useState)(0),[h,g]=(0,r.useState)({title:"",description:"",meal_id:"",stars:0}),[m,p]=(0,r.useState)(v),_=e=>{let{id:t,value:a}=e.target;g(e=>({...e,[t]:a}))},f=async e=>{e.preventDefault();try{(await fetch("https://meal-sharing-final-backend.onrender.com/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(mealData)})).ok?(alert("New review added!"),g({title:"",description:"",meal_id:t,stars:d})):alert("Error creating meal.")}catch(e){console.error("Error creating meal:",e),alert("Error creating meal.")}};return(0,n.jsxs)(x.default,{maxWidth:"md",sx:{mt:5,height:"900px",overflowY:"auto"},children:[(0,n.jsxs)(s.default,{variant:"h5",component:"h2",children:["Add Review ",(0,n.jsx)(j,{onRatingChange:e=>{console.log("Selected Rating:",e),u(e)}})]}),(0,n.jsxs)(l.default,{component:"form",sx:{mt:4},onSubmit:f,children:[(0,n.jsxs)(l.default,{sx:{mb:3},children:[(0,n.jsx)("label",{htmlFor:"title",children:m.tag1}),(0,n.jsx)(c.Z,{id:"title",variant:"outlined",fullWidth:!0,required:!0,"aria-label":m.tag1,onChange:_})]}),(0,n.jsxs)(l.default,{sx:{mb:3},children:[(0,n.jsx)("label",{htmlFor:"description",children:m.tag2}),(0,n.jsx)(c.Z,{id:"description",variant:"outlined",fullWidth:!0,multiline:!0,rows:4,required:!0,"aria-label":m.tag2,onChange:_})]}),(0,n.jsx)(i.default,{variant:"contained",type:"submit","aria-label":"Submit",children:m.buttonTxt})]})]})}function w(e){let{isOpen:t,setIsOpen:a,fetchedSingleMeal:o,currentMealId:c}=e,[d,x]=(0,r.useState)(null),[p,_]=(0,r.useState)([]),[f,j]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),[y,S]=(0,r.useState)(!1),[C,k]=(0,r.useState)(!0),[Z,F]=(0,r.useState)(!0),[E,R]=(0,r.useState)("Unknown"),{user:A}=(0,g.a)(),P=async e=>{try{let t=await fetch("https://meal-sharing-final-backend.onrender.com/meals/".concat(e));if(!t.ok)throw Error("Failed to fetch meal data");let a=await t.json();return console.log("Fetched meal data:",a),a}catch(e){return console.error(e),null}},H=async e=>{try{let t=await fetch("https://meal-sharing-final-backend.onrender.com/meals/".concat(e,"/reviews"));if(!t.ok)throw Error("Failed to fetch reviews");let a=await t.json();return console.log("Fetched reviews:",a),Array.isArray(a)?a:[]}catch(e){return console.error(e),[]}};(0,r.useEffect)(()=>(t&&(F(!0),x(null),P(c).then(e=>{e&&x(Array.isArray(e)?e[0]:e),F(!1)}),H(c).then(e=>_(e))),()=>{}),[t,c]);let T=()=>{a(!1),S(!1),k(!0),j(!1)};return(0,n.jsxs)(n.Fragment,{children:[void 0!==t&&(0,n.jsx)(u.Z,{open:t,onClose:T,disablePortal:!0,hideBackdrop:!C,children:(0,n.jsxs)(l.default,{sx:{position:"absolute",top:"50%",left:y?"30%":"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,transition:"left 0.5s ease"},children:[Z?(0,n.jsx)(s.default,{children:"Loading..."}):d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.default,{id:"simple-modal-title",variant:"h6",component:"h2",children:["Meal: ",d.title]}),(0,n.jsx)(h.default,{alt:d.title,src:d.image_url?d.image_url:"./images/empty.jpg",width:300,height:300,layout:"intrinsic"}),(0,n.jsxs)(s.default,{id:"simple-modal-description",sx:{mt:2},children:["Description: ",d.description]}),(0,n.jsxs)(s.default,{variant:"body1",children:["Place: ",d.location]}),(0,n.jsx)(s.default,{variant:"h6",color:"textSecondary",children:(0,n.jsxs)(s.default,{variant:"body1",children:["Max Reservations: ",d.max_reservations]})}),(0,n.jsxs)(s.default,{children:["Price: ",d.price]}),(0,n.jsxs)(s.default,{variant:"h6",color:"textSecondary",children:["Status: ",E]})]}):(0,n.jsx)(s.default,{children:"Failed to load meal data"}),(0,n.jsx)(i.default,{onClick:T,variant:"outlined",sx:{mt:2},children:"Close"}),A&&(0,n.jsx)(i.default,{onClick:()=>alert("reserved"),variant:"outlined",sx:{mt:2},children:"Reserve"}),(0,n.jsx)(i.default,{onClick:()=>{j(e=>!e),S(!0),k(!1)},variant:"outlined",sx:{mt:2},children:f?"Hide Reviews":"Show Reviews"}),A&&(0,n.jsx)(i.default,{onClick:()=>{w(e=>!e)},variant:"outlined",sx:{mt:2},children:v?"Hide":"Add Reviews"}),v&&(0,n.jsx)(l.default,{children:(0,n.jsx)(b,{mealId:c})})]})}),f&&(0,n.jsx)(m,{reviews:p})]})}var y=a(2900),S=a(7260),C=a(270),k=a(4696),Z=a(5349);function F(e){let{meal:t,index:a,handleOpenModal:r}=e;return(0,n.jsxs)(C.Z,{className:d.gridCard,children:[(0,n.jsx)(s.default,{variant:"h6",component:"div",sx:{textAlign:"center",padding:2,fontWeight:"bold"},children:t.title}),(0,n.jsx)(Z.Z,{alt:t.title,src:t.image_url?t.image_url:"./images/empty.jpg",sx:{width:100,height:100,margin:"auto"}}),(0,n.jsxs)(k.Z,{children:[(0,n.jsxs)(s.default,{variant:"body1",children:["Reservations: ",t.max_reservations]}),(0,n.jsxs)(s.default,{variant:"h6",color:"textSecondary",children:["Price: ",t.price]})]}),(0,n.jsxs)(i.default,{variant:"contained",color:"primary",onClick:()=>r(t.id),children:["See meal#",t.id]},a)]})}let E=async e=>{let t=await fetch("https://meal-sharing-final-backend.onrender.com/meals?sortKey=id&sortDir=".concat(e)),a=await t.json();return console.log(a),a},R=async(e,t)=>{let a="asc"===t?"https://meal-sharing-final-backend.onrender.com/meals/".concat(e,"?sortDir=").concat(t):"https://meal-sharing-final-backend.onrender.com/meals/".concat(e),n=await fetch(a);return await n.json()},A=async(e,t)=>{let a="asc"===t?"https://meal-sharing-final-backend.onrender.com/meals?title=".concat(e,"&sortDir=").concat(t):"https://meal-sharing-final-backend.onrender.com/meals?title=".concat(e),n=await fetch(a),r=await n.json();return console.log(r),r};function P(){let[e,t]=(0,r.useState)([]),[a,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),[p,_]=(0,r.useState)(""),[f,j]=(0,r.useState)("desc"),[v,b]=(0,r.useState)("Active"),C=async()=>{try{let e=await A(p,f);t(e),console.log("done"),console.log(e)}catch(e){console.error("Error searching meals:",e)}},k=async e=>{j(e),console.log("direction "+e)},Z=async e=>{try{let t=await R(e,f);u(t[0]),x(e),g(!0),console.log("this "+t[0])}catch(e){console.error("Error fetching single meal:",e)}};return(0,r.useEffect)(()=>{(async()=>{try{let e=await E(f);t(e)}catch(e){console.error("Error fetching meals:",e)}})()},[f]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:d.header,children:[(0,n.jsx)(c.Z,{label:"Search meal",variant:"outlined",value:p,onChange:e=>_(e.target.value)}),(0,n.jsx)(i.default,{onClick:C,children:"search"})]}),(0,n.jsx)(w,{isOpen:h,setIsOpen:g,fetchedSingleMeal:a,currentMealId:m}),(0,n.jsxs)(l.default,{sx:{flexGrow:1,padding:2},children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(i.default,{children:[" ",(0,n.jsx)(y.Z,{onClick:()=>k("asc")})]}),(0,n.jsxs)(i.default,{children:[" ",(0,n.jsx)(S.Z,{onClick:()=>k("desc")})]})]}),(0,n.jsx)(o.Z,{className:d.grid,container:!0,spacing:6,children:e.length>0?e.map((e,t)=>(0,n.jsx)(o.Z,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(F,{meal:e,index:t,handleOpenModal:Z})},t)):(0,n.jsxs)(s.default,{variant:"h6",component:"div",sx:{textAlign:"center",padding:2},children:["No meals available.",(0,n.jsx)("br",{})," Try again later"]})})]})]})}}},function(e){e.O(0,[851,193,49,643,173,200,21,349,410,971,23,744],function(){return e(e.s=2455)}),_N_E=e.O()}]);