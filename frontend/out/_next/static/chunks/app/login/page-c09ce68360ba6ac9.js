(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{3363:function(e,t,n){Promise.resolve().then(n.bind(n,249))},998:function(e,t,n){"use strict";n.d(t,{H:function(){return o},a:function(){return s}});var a=n(7437),r=n(2265);let l=(0,r.createContext)(),s=()=>(0,r.useContext)(l),o=e=>{let{children:t}=e,[n,s]=(0,r.useState)(null);return(0,a.jsx)(l.Provider,{value:{user:n,login:e=>{s(e)},logout:()=>{s(null)}},children:t})}},249:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n(7437),r=n(2265),l=n(8801),s=n(1193),o=n(3719),i=n(9021),u=n(6548),d=n(7349),c=n(7138),f=n(6463),h=n(998);function m(){let[e,t]=(0,r.useState)(""),[n,m]=(0,r.useState)(""),[x,p]=(0,r.useState)(""),[g,b]=(0,r.useState)(!1),j=(0,f.useRouter)(),{login:v}=(0,h.a)(),w=async t=>{t.preventDefault(),b(!0),p("");try{let t=await fetch("https://meal-sharing-final-backend.onrender.com/hosts");if(!t.ok)throw Error("Network response was not ok");let a=(await t.json()).find(t=>t.email===e&&t.password===n);a?(console.log("Login successful:",a.full_name),alert("Login successful! "+a.full_name),v(a.full_name),j.push("/dashboard?user=".concat(a.full_name,"&id=").concat(a.id))):p("Invalid email or password")}catch(e){console.error("Error fetching hosts:",e),p("Failed to fetch user data")}finally{b(!1)}};return(0,a.jsx)(l.default,{maxWidth:"xs",children:(0,a.jsxs)(s.default,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,a.jsx)(o.default,{component:"h1",variant:"h5",children:"Sign in"}),x&&(0,a.jsx)(o.default,{color:"error",children:x})," ",(0,a.jsxs)(s.default,{component:"form",onSubmit:w,noValidate:!0,sx:{mt:1},children:[(0,a.jsx)(i.Z,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e,onChange:e=>t(e.target.value)}),(0,a.jsx)(i.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:n,onChange:e=>m(e.target.value)}),(0,a.jsx)(u.default,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:g,children:g?"Loading...":"Sign In"}),(0,a.jsxs)(d.Z,{container:!0,children:[(0,a.jsx)(d.Z,{item:!0,xs:!0,children:(0,a.jsx)(u.default,{href:"#",variant:"body2",disabled:g,children:"Forgot password?"})}),(0,a.jsx)(d.Z,{item:!0,children:(0,a.jsx)(c.default,{href:"../become-host",children:(0,a.jsx)(u.default,{variant:"body2",disabled:g,children:"Don't have an account? Become a Host"})})})]})]})]})})}}},function(e){e.O(0,[193,49,643,200,21,291,349,971,23,744],function(){return e(e.s=3363)}),_N_E=e.O()}]);