(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[900],{8917:function(e,t,a){Promise.resolve().then(a.bind(a,7210))},8518:function(e){e.exports={header:"page_header__oRW75",navbar:"page_navbar__k3RMs",margin:"page_margin__dW79Q",grid:"page_grid__JZ9Cz",gridCard:"page_gridCard__SHr0g",courseButton:"page_courseButton__PCWLZ",courseButtonContainer:"page_courseButtonContainer__eS198",aboutParagraphs:"page_aboutParagraphs__oBds0",aboutHeader:"page_aboutHeader__qF7Si","contact-info":"page_contact-info__a4Z7l",container:"page_container__jZF7q",homeContainer:"page_homeContainer__AVfu4",addMealPage:"page_addMealPage__w_ouX",backgroundVideo:"page_backgroundVideo__EjNBN",videoWrapper:"page_videoWrapper__nmU9S",fadeOut:"page_fadeOut__fTsyT",content:"page_content___38fW",transcript:"page_transcript__4aCQE",cvText:"page_cvText__1AvYq",aboutContainer:"page_aboutContainer__DgMjX",main:"page_main__nw1Wk",becomeHostSection:"page_becomeHostSection__Dqkx_",becomeHostSectionForm:"page_becomeHostSectionForm__fxEtH",mediaBox:"page_mediaBox__VTlbq",mediaVideos:"page_mediaVideos__gySBt",imagesContainers:"page_imagesContainers__dIZiD",word:"page_word__YasOU",active:"page_active__9fwfh",homeTextFrontContainer:"page_homeTextFrontContainer__EHP1_",title:"page_title__po7na",map:"page_map__8FF97",closeButton:"page_closeButton__067Ye",loadingState:"page_loadingState__hO15Q",modal:"page_modal__Zu_ho","fade-out":"page_fade-out__CIMVF",addMealPageItems:"page_addMealPageItems__GzeF0",becomeHostFormContainer:"page_becomeHostFormContainer__rpALs",stylingPics:"page_stylingPics__P1Wki",aboutAddWhenResponsive:"page_aboutAddWhenResponsive__0U9Hy"}},998:function(e,t,a){"use strict";a.d(t,{H:function(){return i},a:function(){return o}});var n=a(7437),r=a(2265);let s=(0,r.createContext)(),o=()=>(0,r.useContext)(s),i=e=>{let{children:t}=e,[a,o]=(0,r.useState)(null);return(0,n.jsx)(s.Provider,{value:{user:a,login:e=>{o(e)},logout:()=>{o(null)}},children:t})}},7210:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z}});var n=a(7437),r=a(2265),s=a(6548),o=a(3719),i=a(7156),l=a(219),c=a(7432),d=a(8518),u=a(8620),m=a(335),h=a(6648),g=a(9388),x=a(8685),_=a(998);function p(e){let{reviews:t}=e,{user:a}=(0,_.a)(),r=e=>(0,n.jsx)(i.default,{children:Array.from({length:5}).map((t,a)=>a<e?(0,n.jsx)(g.Z,{sx:{color:"#FFD700"}},a):(0,n.jsx)(x.Z,{sx:{color:"#FFD700"}},a))});return(0,n.jsxs)(i.default,{sx:{position:"absolute",top:"10%",right:"5%",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:3,overflowY:"scroll",maxHeight:"80%",zIndex:5,borderRadius:2},children:[(0,n.jsx)(o.default,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:"Reviews"}),t&&t.length>0?t.map((e,t)=>(0,n.jsxs)(i.default,{sx:{mb:3,p:2,borderRadius:1,border:"1px solid #ddd",bgcolor:"#f9f9f9"},children:[(0,n.jsx)(o.default,{variant:"h6",sx:{fontWeight:"bold"},children:e.title}),(0,n.jsx)(o.default,{variant:"body2",sx:{color:"#666",mb:1},children:e.description}),r(e.stars),a&&(0,n.jsxs)(o.default,{variant:"caption",sx:{color:"#888",mt:1,display:"block"},children:["Reviewed by ",a.name||"Anonymous"]})]},t)):(0,n.jsx)(o.default,{children:"No Reviews Available"})]})}a(7449);var f=a(3019),b=e=>{let{onRatingChange:t}=e,[a,s]=(0,r.useState)(0),o=e=>{s(e),t(e)};return(0,n.jsx)(i.default,{sx:{display:"flex",alignItems:"center"},children:[1,2,3,4,5].map(e=>(0,n.jsx)(m.Z,{onClick:()=>o(e),children:e<=a?(0,n.jsx)(g.Z,{sx:{color:"yellow"}}):(0,n.jsx)(x.Z,{sx:{color:"gray"}})},e))})};let j={image:"images/thumbnail.png",tag1:"Title",tag2:"Description",tag3:"Stars",buttonTxt:"Submit"};function v(e){let{mealId:t}=e,[a,l]=(0,r.useState)(!0),[d,u]=(0,r.useState)(0),[m,h]=(0,r.useState)({title:"",description:"",meal_id:t,stars:d}),[g,x]=(0,r.useState)({}),[_,p]=(0,r.useState)(j),v=e=>{let{id:t,value:a}=e.target;h(e=>({...e,[t]:"stars"===t?parseInt(a):a}))},y=()=>{let e={};return m.title.trim()?(m.title.length<3||m.title.length>50)&&(e.title="Title must be between 3 and 50 characters."):e.title="Title is required.",m.description.trim()?m.description.length<10&&(e.description="Description must be at least 10 characters long."):e.description="Description is required.",0===m.stars&&(e.stars="You must select a rating."),x(e),0===Object.keys(e).length},w=async e=>{if(e.preventDefault(),!y())return;let{title:a,description:n,stars:r,meal_id:s}=m;try{let e=await fetch("https://meal-sharing-final-backend.onrender.com/reviews?title=".concat(encodeURIComponent(a),"&description=").concat(encodeURIComponent(n),"&stars=").concat(r,"&meal_id=").concat(s),{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok)alert("New review added!"),h({title:"",description:"",meal_id:t,stars:0}),u(0),x({});else{let t=await e.json();console.log("Error response from server:",t),alert("Error creating review: ".concat(t.message||"Unknown error"))}}catch(e){console.error("Error creating review:",e),alert("Error creating review.")}};return(0,n.jsxs)(f.default,{maxWidth:"md",sx:{mt:5,height:"900px",overflowY:"auto"},children:[(0,n.jsxs)(o.default,{variant:"h5",component:"h2",children:["Add Review ",(0,n.jsx)(b,{onRatingChange:e=>{u(e),h(t=>({...t,stars:e}))}})]}),(0,n.jsxs)(i.default,{component:"form",sx:{mt:4},onSubmit:w,children:[(0,n.jsxs)(i.default,{sx:{mb:3},children:[(0,n.jsx)("label",{htmlFor:"title",children:_.tag1}),(0,n.jsx)(c.Z,{id:"title",variant:"outlined",fullWidth:!0,required:!0,"aria-label":_.tag1,value:m.title,onChange:v,error:!!g.title,helperText:g.title})]}),(0,n.jsxs)(i.default,{sx:{mb:3},children:[(0,n.jsx)("label",{htmlFor:"description",children:_.tag2}),(0,n.jsx)(c.Z,{id:"description",variant:"outlined",fullWidth:!0,multiline:!0,rows:4,required:!0,"aria-label":_.tag2,value:m.description,onChange:v,error:!!g.description,helperText:g.description})]}),g.stars&&(0,n.jsx)(o.default,{variant:"body2",color:"error",sx:{mb:2},children:g.stars}),(0,n.jsx)(s.Z,{variant:"contained",type:"submit","aria-label":"Submit",children:_.buttonTxt})]})]})}let y={image:"images/thumbnail.png",tag1:"Name",tag2:"Email",tag3:"Phone",tag4:"Number of guests",buttonTxt:"Submit Reservation"};function w(e){let{mealId:t}=e,[a,l]=(0,r.useState)({number_of_guests:"",contact_phonenumber:"",meal_id:t,contact_name:"",contact_email:""}),[d,u]=(0,r.useState)({}),[m,h]=(0,r.useState)(y),g=e=>Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&"),x=e=>{let{id:t,value:a}=e.target;l(e=>({...e,[t]:"number_of_guests"===t?parseInt(a):a}))},_=()=>{let e={};return(!a.contact_name||a.contact_name.length<2)&&(e.contact_name="Name must be at least 2 characters long."),a.contact_email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.contact_email)||(e.contact_email="Please enter a valid email address."),a.contact_phonenumber&&/^\+?[\d\s\-()]{7,}$/.test(a.contact_phonenumber)||(e.contact_phonenumber="Please enter a valid phone number."),(!a.number_of_guests||a.number_of_guests<=0)&&(e.number_of_guests="Please enter a valid number of guests (at least 1)."),u(e),0===Object.keys(e).length},p=async e=>{if(e.preventDefault(),_())try{let e=g(a);(await fetch("https://meal-sharing-final-backend.onrender.com/reservations?".concat(e),{method:"POST",headers:{"Content-Type":"application/json"}})).ok?(alert("New reservation added!"),l({number_of_guests:"",meal_id:t,contact_phonenumber:"",contact_name:"",contact_email:""})):alert("Error creating reservation.")}catch(e){console.error("Error creating reservation:",e),alert("Error creating reservation.")}};return(0,n.jsxs)(f.default,{maxWidth:"md",sx:{mt:5,height:"900px",overflowY:"auto"},children:[(0,n.jsx)(o.default,{variant:"h5",component:"h2",children:"Make Reservation"}),(0,n.jsxs)(i.default,{component:"form",sx:{mt:4},onSubmit:p,children:[(0,n.jsxs)(i.default,{sx:{mb:3},children:[(0,n.jsx)("label",{htmlFor:"contact_name",children:m.tag1}),(0,n.jsx)(c.Z,{id:"contact_name",variant:"outlined",fullWidth:!0,required:!0,"aria-label":m.tag1,onChange:x,error:!!d.contact_name,helperText:d.contact_name})]}),(0,n.jsxs)(i.default,{sx:{mb:3},children:[(0,n.jsx)("label",{htmlFor:"contact_email",children:m.tag2}),(0,n.jsx)(c.Z,{id:"contact_email",variant:"outlined",fullWidth:!0,rows:4,required:!0,"aria-label":m.tag2,onChange:x,error:!!d.contact_email,helperText:d.contact_email})]}),(0,n.jsxs)(i.default,{sx:{mb:3},children:[(0,n.jsx)("label",{htmlFor:"contact_phonenumber",children:m.tag3}),(0,n.jsx)(c.Z,{id:"contact_phonenumber",variant:"outlined",fullWidth:!0,required:!0,"aria-label":m.tag3,onChange:x,error:!!d.contact_phonenumber,helperText:d.contact_phonenumber})]}),(0,n.jsxs)(i.default,{sx:{mb:3},children:[(0,n.jsx)("label",{htmlFor:"number_of_guests",children:m.tag4}),(0,n.jsx)(c.Z,{id:"number_of_guests",variant:"outlined",fullWidth:!0,required:!0,"aria-label":m.tag4,onChange:x,error:!!d.number_of_guests,helperText:d.number_of_guests})]}),(0,n.jsx)(s.Z,{variant:"contained",type:"submit","aria-label":"Submit",children:m.buttonTxt})]})]})}var S=a(9337),Z=a(319),C=a(16),k=a(9336),F=a(3324),T=a(6828),P=a(4095),R=a(1027),E=a(1902),A=a(524),I=a(5664),W=a(468),N=a(692);let H=(e,t)=>{var a;if(!Array.isArray(e))return console.error("Invalid reservations data:",e),t||0;let n=e.reduce((e,t)=>t&&null!=t.number_of_guests?e+t.number_of_guests:(console.warn("Invalid reservation or missing number_of_guests:",t),e),0),r=(t||(null===(a=e[0])||void 0===a?void 0:a.max_reservations)||0)-n;return r>=0?r:0};function D(e){let{isOpen:t,setIsOpen:a,fetchedSingleMeal:l,currentMealId:c}=e,[g,x]=(0,r.useState)(null),[f,b]=(0,r.useState)([]),[j,y]=(0,r.useState)(!1),[D,O]=(0,r.useState)(!1),[M,q]=(0,r.useState)(!1),[B,U]=(0,r.useState)(!1),[V,Y]=(0,r.useState)(!0),[K,L]=(0,r.useState)(!0),[z,Q]=(0,r.useState)("Unknown"),[G,X]=(0,r.useState)([]),[$,J]=(0,r.useState)(!1),{user:ee}=(0,_.a)();(0,r.useEffect)(()=>{t&&(L(!0),x(null),et(c).then(e=>{e&&x(Array.isArray(e)?e[0]:e),L(!1)}),ea(c).then(e=>b(e)),en(c).then(e=>X(e)))},[t,c]);let et=async e=>{try{let t=await fetch("https://meal-sharing-final-backend.onrender.com/meals/".concat(e));if(!t.ok)throw Error("Failed to fetch meal data");return await t.json()}catch(e){return console.error(e),null}},ea=async e=>{try{let t=await fetch("https://meal-sharing-final-backend.onrender.com/meals/".concat(e,"/reviews"));if(!t.ok)throw Error("Failed to fetch reviews");let a=await t.json();return Array.isArray(a)?a:[]}catch(e){return console.error(e),[]}},en=async e=>{try{let t=await fetch("https://meal-sharing-final-backend.onrender.com/meals/".concat(e,"/available-reservations"));if(!t.ok)throw Error("Failed to fetch availability");let a=await t.json();return Array.isArray(a)?a:[]}catch(e){return console.error(e),[]}},er=()=>{J(!0),setTimeout(()=>{a(!1),U(!1),Y(!0),y(!1),J(!1)},400)},es=G?H(G,null==g?void 0:g.max_reservations):null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{open:t,onClose:er,disablePortal:!0,hideBackdrop:!V,className:"".concat(d.modal," ").concat($?d.fadeOut:""),children:(0,n.jsxs)(i.default,{sx:{position:"absolute",top:"50%",left:B?"30%":"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,transition:"left 0.5s ease",borderRadius:2},children:[(0,n.jsx)(m.Z,{onClick:er,className:d.closeButton,children:(0,n.jsx)(S.Z,{})}),K?(0,n.jsxs)(o.default,{children:["Loading...",(0,n.jsx)(W.Z,{})]}):g?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.default,{variant:"h6",component:"h2",children:["Meal: ",g.title]}),(0,n.jsx)(h.default,{alt:g.title,src:g.image_url||"./images/empty.jpg",width:300,height:300,layout:"intrinsic",priority:!0}),(0,n.jsxs)(o.default,{sx:{mt:2},children:[(0,n.jsx)(F.Z,{sx:{mr:1}}),"Description: ",g.description]}),(0,n.jsxs)(o.default,{variant:"body1",children:[(0,n.jsx)(T.Z,{sx:{mr:1}}),"Place: ",g.location]}),(0,n.jsxs)(o.default,{variant:"body1",children:[(0,n.jsx)(P.Z,{sx:{mr:1}}),"Max Reservations: ",g.max_reservations]}),(0,n.jsxs)(o.default,{variant:"body1",children:[(0,n.jsx)(R.Z,{sx:{mr:1}}),"Price: ",g.price," DKK"]}),(0,n.jsxs)(o.default,{variant:"body1",children:[(0,n.jsx)(E.Z,{sx:{mr:1}}),"Reservations left:"," ",null!==es?es:"Calculating..."]}),(0,n.jsx)(o.default,{variant:"h6",sx:{color:es>0?"green":"red",fontWeight:"bold",display:"flex",alignItems:"center"},children:es>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.Z,{sx:{mr:1}}),"Status: Available"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.Z,{sx:{mr:1}}),"Status: Not Available"]})})]}):(0,n.jsx)(o.default,{children:"Failed to load meal data"}),ee&&(0,n.jsx)(s.Z,{onClick:()=>{O(e=>!e)},variant:"outlined",startIcon:(0,n.jsx)(k.Z,{}),sx:{mt:2},children:D?"Hide":"Reserve"}),(0,n.jsx)(s.Z,{onClick:()=>{y(e=>!e),U(e=>!e),Y(!1),j||window.scrollTo({top:0,behavior:"smooth"})},variant:"outlined",startIcon:j?(0,n.jsx)(N.Z,{}):(0,n.jsx)(Z.Z,{}),sx:{mt:2},children:j?"Hide Reviews":"Show Reviews"}),ee&&(0,n.jsx)(s.Z,{onClick:()=>{q(e=>!e)},startIcon:M?(0,n.jsx)(N.Z,{}):(0,n.jsx)(C.Z,{}),variant:"outlined",sx:{mt:2},children:M?"Hide":"Add Reviews"}),M&&(0,n.jsx)(i.default,{children:(0,n.jsx)(v,{mealId:c})}),D&&(0,n.jsx)(w,{mealId:c})]})}),j&&(0,n.jsx)(p,{reviews:f})]})}var O=a(2900),M=a(7260),q=a(270),B=a(4696),U=a(5349);function V(e){let{meal:t,index:a,handleOpenModal:r}=e;return(0,n.jsxs)(q.Z,{className:d.gridCard,children:[(0,n.jsx)(o.default,{variant:"h6",component:"div",sx:{textAlign:"center",padding:2,fontWeight:"bold"},children:t.title}),(0,n.jsx)(U.Z,{alt:t.title,src:t.image_url?t.image_url:"./images/empty.jpg",sx:{width:100,height:100,margin:"auto"}}),(0,n.jsxs)(B.Z,{children:[(0,n.jsxs)(o.default,{variant:"body1",children:["Reservations: ",t.max_reservations]}),(0,n.jsxs)(o.default,{variant:"h6",color:"textSecondary",children:["Price: ",t.price," DKK"]})]}),(0,n.jsx)(s.Z,{variant:"contained",color:"primary",onClick:()=>r(t.id),children:"See details"},a)]})}let Y=async e=>{let t=await fetch("https://meal-sharing-final-backend.onrender.com/meals?sortKey=id&sortDir=".concat(e)),a=await t.json();return console.log(a),a},K=async(e,t)=>{let a="asc"===t?"https://meal-sharing-final-backend.onrender.com/meals/".concat(e,"?sortDir=").concat(t):"https://meal-sharing-final-backend.onrender.com/meals/".concat(e),n=await fetch(a);return await n.json()},L=async(e,t)=>{let a="asc"===t?"https://meal-sharing-final-backend.onrender.com/meals?title=".concat(e,"&sortDir=").concat(t):"https://meal-sharing-final-backend.onrender.com/meals?title=".concat(e),n=await fetch(a),r=await n.json();return console.log(r),r};function z(){let[e,t]=(0,r.useState)([]),[a,u]=(0,r.useState)(null),[m,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),[_,p]=(0,r.useState)(""),[f,b]=(0,r.useState)("desc"),[j,v]=(0,r.useState)("Active"),[y,w]=(0,r.useState)(!0),S=async()=>{try{let e=await L(_,f);t(e),console.log("done"),console.log(e)}catch(e){console.error("Error searching meals:",e)}},Z=async()=>{try{async function e(){p("")}await e();let a=await L(_,f);t(a)}catch(e){console.error("Error clearing meals:",e)}},C=async e=>{b(e),console.log("direction "+e)},k=async e=>{try{let t=await K(e,f);u(t[0]),x(e),h(!0),console.log("this "+t[0])}catch(e){console.error("Error fetching single meal:",e)}};return(0,r.useEffect)(()=>{(async()=>{try{w(!0);let e=await Y(f);t(e)}catch(e){console.error("Error fetching meals:",e)}finally{w(!1)}})()},[f]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:d.addMealPage,children:[(0,n.jsx)(c.Z,{label:"Search meal",variant:"outlined",value:_,onChange:e=>p(e.target.value)}),(0,n.jsxs)("div",{children:[(0,n.jsx)(s.Z,{onClick:S,children:"search"}),(0,n.jsx)(s.Z,{onClick:Z,children:"clear"})]})]}),(0,n.jsx)(D,{isOpen:m,setIsOpen:h,fetchedSingleMeal:a,currentMealId:g}),(0,n.jsxs)(i.default,{sx:{flexGrow:1,padding:2,backgroundColor:"#fbe3c7"},children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(s.Z,{children:[" ",(0,n.jsx)(O.Z,{onClick:()=>C("asc")})]}),(0,n.jsxs)(s.Z,{children:[" ",(0,n.jsx)(M.Z,{onClick:()=>C("desc")})]})]}),y?(0,n.jsxs)(i.default,{className:d.loadingState,children:[(0,n.jsxs)(o.default,{children:["Loading data... ",(0,n.jsx)(W.Z,{})]})," "]}):(0,n.jsx)(l.Z,{className:d.grid,container:!0,spacing:6,children:e.length>0?e.map((e,t)=>(0,n.jsx)(l.Z,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(V,{meal:e,index:t,handleOpenModal:k})},t)):(0,n.jsxs)(o.default,{variant:"h6",component:"div",sx:{textAlign:"center",padding:2},children:["No meals available.",(0,n.jsx)("br",{})," Please try again later as the content is still loading."]})})]})]})}}},function(e){e.O(0,[851,156,154,173,71,432,219,344,971,23,744],function(){return e(e.s=8917)}),_N_E=e.O()}]);